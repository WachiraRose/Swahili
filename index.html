<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fill in the Blanks Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .drop-zone {
            border: 2px dashed #ccc;
            padding: 5px 10px;
            min-width: 100px;
            background-color: #f9f9f9;
            display: inline-block;
        }

        .draggable {
            margin: 10px;
            padding: 5px 10px;
            background-color: #f2f2f2;
            border: 1px solid #ccc;
            cursor: pointer;
            display: inline-block;
        }

        .draggable:hover {
            background-color: #ddd;
        }

        .popup-message {
            position: absolute;
            background-color: #f87171;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            display: none;
        }

        #confetti {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        /* Different section colors */
        .section-a {
            background-color: #d1fae5;
        }

        .section-b {
            background-color: #e0f2fe;
        }

        @media (max-width: 640px) {
            .question {
                font-size: 14px;
            }

            .draggable, .drop-zone {
                font-size: 14px;
                padding: 5px;
                margin: 5px;
            }
        }
    </style>
</head>
<body class="bg-gray-100">
    <h1 class="text-2xl font-bold my-4">Exercise on Greetings in Kiswahili and English</h1>

    <!-- Section A (Fill in the Blanks) -->
    <div id="quiz-container" class="section-a w-11/12 md:w-8/12 bg-white p-6 rounded shadow-lg relative">
        <!-- Questions with drop zones -->
        <div class="question my-2">
            1. In the morning, you would say <span class="drop-zone" data-answer="Habari"></span> ya asubuhi.
        </div>
        <div class="question my-2">
            2. When asking someone their name, you say “Jina lako ni <span class="drop-zone" data-answer="nani"></span>.”
        </div>
        <div class="question my-2">
            3. When a child meets their mother, they say “<span class="drop-zone" data-answer="shikamoo"></span> mama.”
        </div>
        <div class="question my-2">
            4. Before going to sleep at night, it's nice to say, "<span class="drop-zone" data-answer="usiku"></span> mwema."
        </div>
        <div class="question my-2">
            5. To say sorry to someone, you say “<span class="drop-zone" data-answer="pole"></span> mama.”
        </div>

        <div id="popup-message" class="popup-message"></div>
    </div>

    <!-- Section B (True/False) -->
    <div class="section-b w-11/12 md:w-8/12 mt-4 bg-white p-6 rounded shadow-lg relative">
        <h2 class="text-xl font-bold my-4">B. Answer whether it is True or False:</h2>

        <div class="question my-2">
            6. "Habari ya asubuhi" means "Good night" in Kiswahili. <span class="drop-zone" data-answer="False"></span>
        </div>
        <div class="question my-2">
            7. You would say "Hodi, hodi?” to mean “May I come in?” <span class="drop-zone" data-answer="True"></span>
        </div>
        <div class="question my-2">
            8. "Lala unono" is a greeting you use in the morning. <span class="drop-zone" data-answer="False"></span>
        </div>
        <div class="question my-2">
            9. "Habari ya jioni" translates to "Good evening" in English. <span class="drop-zone" data-answer="True"></span>
        </div>
        <div class="question my-2">
            10. “Hatujambo” means “We are fine.” <span class="drop-zone" data-answer="True"></span>
        </div>

        <div id="popup-message-b" class="popup-message"></div>
    </div>

    <!-- Answer container for draggable items -->
    <div id="answer-container" class="w-11/12 md:w-8/12 mt-4 bg-white p-4 rounded shadow-lg">
        <p class="text-lg font-semibold">Drag the answers here:</p>
        <div class="flex flex-wrap justify-center">
            <div class="draggable" draggable="true" data-answer="Habari">Habari</div>
            <div class="draggable" draggable="true" data-answer="nani">nani</div>
            <div class="draggable" draggable="true" data-answer="shikamoo">shikamoo</div>
            <div class="draggable" draggable="true" data-answer="usiku">usiku</div>
            <div class="draggable" draggable="true" data-answer="pole">pole</div>
            <div class="draggable" draggable="true" data-answer="True">True</div>
            <div class="draggable" draggable="true" data-answer="False">False</div>
        </div>
    </div>

    <!-- Confetti canvas -->
    <canvas id="confetti"></canvas>

    <script>
        const draggables = document.querySelectorAll('.draggable');
        const dropZones = document.querySelectorAll('.drop-zone');
        const popupMessageA = document.getElementById('popup-message');
        const popupMessageB = document.getElementById('popup-message-b');
        const confettiCanvas = document.getElementById('confetti');
        let confettiCtx = confettiCanvas.getContext('2d');
        let confettiActive = false;

        // Set up drag events
        draggables.forEach(draggable => {
            draggable.addEventListener('dragstart', dragStart);
        });

        dropZones.forEach(dropZone => {
            dropZone.addEventListener('dragover', dragOver);
            dropZone.addEventListener('drop', drop);
        });

        function dragStart(e) {
            e.dataTransfer.setData('text', e.target.dataset.answer);
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function drop(e) {
            e.preventDefault();
            const answer = e.dataTransfer.getData('text');
            const correctAnswer = e.target.getAttribute('data-answer');

            const isSectionA = e.target.closest('.section-a') ? true : false;
            const popupMessage = isSectionA ? popupMessageA : popupMessageB;

            if (answer === correctAnswer) {
                e.target.textContent = answer;
                showPopup(popupMessage, 'Correct!', 'bg-green-500');
                triggerConfetti();
            } else {
                showPopup(popupMessage, 'Try Again!', 'bg-red-500');
            }
        }

        // Popup message function
        function showPopup(popupElement, message, bgColor) {
            popupElement.textContent = message;
            popupElement.style.backgroundColor = bgColor;
            popupElement.style.display = 'block';
            setTimeout(() => {
                popupElement.style.display = 'none';
            }, 2000);
        }

        // Confetti logic
        function triggerConfetti() {
            if (confettiActive) return;
            confettiActive = true;

            let confettiDuration = 2000;
            let confettiCount = 150;
            let end = Date.now() + confettiDuration;

            function confettiParticle() {
                let colors = ['#f0e68c', '#add8e6', '#ff69b4', '#87ceeb', '#ffd700'];
                return {
                    color: colors[Math.floor(Math.random() * colors.length)],
                    x: Math.random() * confettiCanvas.width,
                    y: Math.random() * confettiCanvas.height,
                    radius: Math.random() * 4,
                    dx: (Math.random() - 0.5) * 6,
                    dy: Math.random() * 4 + 2
                };
            }

            let confetti = [];
            for (let i = 0; i < confettiCount; i++) {
                confetti.push(confettiParticle());
            }

            function drawConfetti() {
                confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);

                confetti.forEach(particle => {
                    confettiCtx.fillStyle = particle.color;
                    confettiCtx.beginPath();
                    confettiCtx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                    confettiCtx.fill();

                    particle.x += particle.dx;
                    particle.y += particle.dy;

                    if (particle.y > confettiCanvas.height) {
                        particle.x = Math.random() * confettiCanvas.width;
                        particle.y = 0;
                    }
                });

                if (Date.now() < end) {
                    requestAnimationFrame(drawConfetti);
                } else {
                    confettiActive = false;
                }
            }

            requestAnimationFrame(drawConfetti);
        }
    </script>
</body>
</html>
